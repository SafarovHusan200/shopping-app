"use client"
import React, { useState } from 'react'
import style from "./navbar.module.css";
import Image from 'next/image';
import Link from 'next/link';
import Ru from "@/public/icons/Flag_of_Russia.svg";
import Eng from "@/public/icons/Flag_of_the_United_Kingdom.svg";
import Uz from "@/public/icons/Flag_of_Uzbekistan.svg";
const languages = [
  { code: 'ru', name: 'Русский', flag: Ru },
  { code: 'en', name: 'English', flag: Eng },
  { code: 'uz', name: 'O‘zbekcha', flag: Uz }
];

const tab = [
  { code: 'thb1', name: 'THB' },
  { code: 'thb2', name: 'THB2' },
  { code: 'thb3', name: 'THB3' }
];

interface NavbarProps {
  setFilterMenu: (value: boolean) => void
}


const Navbar: React.FC<NavbarProps> = ({ setFilterMenu }) => {
  const [selected, setSelected] = useState(languages[0]);
  const [selectedTab, setSelectedTab] = useState(tab[0]);
  const [open, setOpen] = useState(false);
  const [openTab, setOpenTab] = useState(false);

  const handleSelect = (lang: { code: string; name: string; flag: string }) => {
    setSelected(lang);
    setOpen(false);
  };

    const handleSelectTab = (tab: { code: string; name: string;}) => {
    setSelectedTab(tab);
    setOpenTab(false);
  };

    const handleClick = () => {
      setFilterMenu(true)
   
    }
  return (
    <>
    <nav className={style.nav}>
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
        <rect width="48" height="48" rx="24" fill="white"/>
        <path d="M20.1992 4.22852C31.358 2.00023 42.405 9.8578 43.9443 21.1631L43.9453 21.1641C44.0566 21.9988 44.1073 22.8436 44.1465 23.6816C44.1642 24.0506 44.1239 24.4242 43.9463 24.71C43.7604 25.0088 43.4411 25.1855 42.9658 25.1855C42.5143 25.1855 42.1862 25.0262 41.9766 24.7471C41.7727 24.4756 41.6966 24.1113 41.6953 23.7285V23.7275C41.6953 20.8267 40.9075 18.1319 39.5527 15.5713C36.2941 9.42973 28.8001 5.51534 22.0137 6.44238C14.3062 7.49875 8.09468 13.137 6.66113 20.3369C4.68306 30.3487 11.1003 39.8066 21.2256 41.417C25.1158 42.0331 29.0604 41.8284 32.7676 40.1846C34.2036 39.5475 35.2864 38.6624 36.0264 37.5586C36.7665 36.4546 37.1692 35.1237 37.2305 33.5859C37.3385 30.8663 36.07 28.7768 33.7842 27.2939H33.7832C30.9279 25.4347 28.0528 23.6003 25.2158 21.7119C24.8922 21.4968 24.6279 21.3932 24.374 21.3867C24.1219 21.3803 23.8559 21.47 23.5283 21.6914C22.4812 22.399 21.4138 23.0814 20.3516 23.7656C19.2901 24.4493 18.2325 25.1341 17.2012 25.8516C16.998 26.0208 16.831 26.2296 16.709 26.4639C16.5869 26.6983 16.5122 26.9546 16.4902 27.2178L16.4912 27.2188C16.4017 29.1992 16.4588 31.1808 16.4473 33.1768L16.4551 33.4961C16.4587 33.6068 16.4623 33.7225 16.459 33.8359C16.4525 34.0589 16.4211 34.2956 16.3037 34.4883C16.1804 34.6992 15.9976 34.923 15.793 35.1006C15.6163 35.2538 15.4091 35.3852 15.1982 35.4326L15.1074 35.4473C14.9879 35.4596 14.8633 35.411 14.7588 35.3516C14.6493 35.2893 14.538 35.2016 14.4375 35.1035C14.3367 35.0051 14.2429 34.8925 14.1699 34.7783C14.0986 34.6667 14.0406 34.5435 14.0234 34.4238L13.9756 34.0371C13.8823 33.1318 13.9142 32.2018 13.9043 31.3203C13.8957 30.2949 13.9033 29.2716 13.9043 27.9902C13.2393 28.4123 12.8069 28.6995 12.3633 28.957H12.3623C12.0516 29.1365 11.6898 29.3251 11.334 29.3623C11.1522 29.3813 10.9673 29.3609 10.791 29.2783C10.6149 29.1957 10.4576 29.0552 10.3223 28.8496C10.0511 28.4376 10.027 28.0453 10.1865 27.6943C10.3406 27.3556 10.6563 27.0759 11.0225 26.8525C11.3741 26.638 11.7021 26.4114 12.0352 26.1875C12.3666 25.9647 12.7019 25.7456 13.0605 25.5527C13.3922 25.3744 13.6038 25.1674 13.7334 24.9238C13.864 24.6785 13.9193 24.3813 13.916 24.0107C13.8907 20.952 13.8976 17.8934 13.916 14.833C13.916 14.3825 13.931 14.0192 13.9854 13.7305C14.04 13.4399 14.1371 13.2093 14.3125 13.0391C14.4874 12.8693 14.723 12.7766 15.0176 12.7246C15.311 12.6729 15.6795 12.6588 16.1357 12.6582H16.1367C19.8563 12.6582 23.5732 12.6996 27.2891 12.6445C28.742 12.6226 30.0771 12.8282 31.2178 13.3916C32.3617 13.9567 33.3003 14.8773 33.9639 16.2676C34.6077 17.616 34.7789 18.9105 34.5322 20.1611C34.2951 21.3631 33.6722 22.5117 32.7363 23.624C33.552 24.1682 34.3359 24.7068 35.1445 25.2227H35.1436C38.3674 27.2549 39.8428 30.2225 39.6562 33.9658C39.5539 35.9914 39.0035 37.7481 37.998 39.1855C36.9924 40.6233 35.537 41.734 33.6396 42.4785H33.6387C32.0384 43.096 30.3773 43.541 28.6836 43.8066L27.9561 43.9092C21.8339 44.6976 16.1074 43.6219 11.2236 39.5635C6.90232 35.9764 4.47462 31.3983 3.94531 25.8369L3.90039 25.2959C3.17941 15.1726 10.2707 6.20871 20.1992 4.22852ZM28.707 15.1592C24.8486 15.0584 20.9804 15.112 17.1133 15.1602H17.1113C17.0833 15.1603 17.0304 15.175 16.957 15.2168C16.887 15.2568 16.8113 15.3142 16.7412 15.3809C16.671 15.4476 16.61 15.5199 16.5674 15.5869C16.545 15.6221 16.5299 15.6525 16.5205 15.6768L16.5068 15.7324C16.4512 18.1593 16.4704 20.5876 16.4717 23.3125C18.8252 21.7928 20.9496 20.4643 23.0195 19.0527C23.4897 18.7326 23.932 18.5746 24.3789 18.585C24.825 18.5953 25.2554 18.7726 25.7021 19.083C26.3734 19.5502 27.061 19.9926 27.752 20.4375C28.2698 20.771 28.7897 21.1063 29.3037 21.4531L29.8154 21.8037L29.8164 21.8047C30.1249 22.0236 30.3644 22.0936 30.5625 22.0654C30.7595 22.0374 30.9551 21.9064 31.1631 21.6338C32.078 20.4336 32.4954 19.1624 31.8955 17.7227C31.2802 16.2459 30.2528 15.2147 28.707 15.1602V15.1592Z" fill="black" stroke="black" strokeWidth="0.3"/>
      </svg>
      <div className={style.nav_items}>
        <Link href="/" className={style.nav_item}>Главная</Link>
        <Link href="/about" className={style.nav_item}>Каталог недвижимости</Link>
        <Link href="/contact" className={style.nav_item}>Хотите продать?</Link>
        <Link href="/blog" className={style.nav_item}>Для агентов</Link> 

        <div className={style.dropdown}>
          <button className={style.dropdown_button} onClick={() => setOpenTab(!openTab)}>
            <span className={style.dropdown_text}>{selectedTab.name}</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M5.5575 6.4425L9 9.8775L12.4425 6.4425L13.5 7.5L9 12L4.5 7.5L5.5575 6.4425Z" fill="black"/>
            </svg>
          </button>
          {openTab && (
            <ul className={style.dropdown_menu}>
              {tab.map((lang) => (
                <li key={lang.code} className={style.dropdown_item} onClick={() => handleSelectTab(lang)}>
                  <span className={style.dropdown_text}>{lang.name}</span>
                </li>
              ))}
            </ul>
          )}
        </div>

        <div className={style.dropdown}>
          <button className={style.dropdown_button} onClick={() => setOpen(!open)}>
            <Image className={style.dropdown_flag} src={selected.flag} alt={selected.name} width={27} height={27} />
            <span className={style.dropdown_text}>{selected.name}</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M5.5575 6.4425L9 9.8775L12.4425 6.4425L13.5 7.5L9 12L4.5 7.5L5.5575 6.4425Z" fill="black"/>
            </svg>
          </button>
          {open && (
            <ul className={style.dropdown_menu}>
              {languages.map((lang) => (
                <li key={lang.code} className={style.dropdown_item} onClick={() => handleSelect(lang)}>
                  <Image className={style.dropdown_flag} src={lang.flag} alt={lang.name} width={24} height={24} />
                  <span className={style.dropdown_text}>{lang.name}</span>
                </li>
              ))}
            </ul>
          )}
        </div>
      </div>
    </nav>

    <nav className={style.nav_mobile}>
      <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
        <rect width="40" height="40" rx="20" fill="white"/>
        <path d="M11.5463 23.1593C10.8619 23.5902 10.461 23.8612 10.0446 24.103C9.51466 24.4092 8.89873 24.688 8.48029 24.0523C8.06185 23.4167 8.43141 22.9019 9.03561 22.5334C9.6398 22.1649 10.1638 21.7534 10.7622 21.4317C11.3605 21.11 11.5619 20.6635 11.556 20.0083C11.5345 17.4091 11.5404 14.81 11.556 12.2088C11.556 10.6782 11.7653 10.4891 13.3158 10.4871C16.4756 10.4871 19.6374 10.5222 22.7972 10.4754C25.2434 10.4384 27.2495 11.1676 28.3543 13.4821C29.4278 15.7303 28.9135 17.7718 27.2378 19.708C27.9711 20.1955 28.6769 20.683 29.4043 21.147C32.1046 22.8493 33.3365 25.3275 33.1801 28.4649C33.008 31.8693 31.3323 34.3379 28.147 35.5877C26.6022 36.1839 24.9901 36.5898 23.3467 36.7966C18.169 37.4635 13.3393 36.5529 9.22136 33.1309C5.4567 30.0059 3.39708 25.9931 3.04251 21.0924C2.4344 12.554 8.41577 4.99044 16.7944 3.3194C26.2073 1.43973 35.5284 8.06928 36.8268 17.6061C36.9206 18.31 36.9636 19.0236 36.9969 19.7353C37.0262 20.3456 36.858 20.8799 36.1209 20.8799C35.4189 20.8799 35.1706 20.3924 35.1686 19.7685C35.1686 17.2785 34.4921 14.9679 33.3326 12.7763C30.5384 7.50967 24.1171 4.15395 18.2941 4.94949C11.6929 5.85423 6.36658 10.684 5.13667 16.8612C3.4414 25.4406 8.94175 33.5501 17.6215 34.9306C20.9455 35.4571 24.3244 35.2836 27.5037 33.8738C29.9831 32.7741 31.2677 30.8067 31.3733 28.1529C31.4672 25.7897 30.3605 23.9743 28.3856 22.6933C25.9571 21.1119 23.5148 19.554 21.1039 17.9492C20.5349 17.571 20.1106 17.5378 19.5279 17.9317C17.7505 19.1328 15.9047 20.2481 14.1449 21.4727C13.957 21.6281 13.8023 21.8194 13.6898 22.0354C13.5773 22.2514 13.5093 22.4877 13.4899 22.7303C13.4136 24.417 13.4625 26.1094 13.4527 27.8C13.4527 28.1548 13.5133 28.5799 13.3491 28.849C13.1535 29.1844 12.7625 29.5685 12.4281 29.6036C12.1817 29.6289 11.689 29.1473 11.646 28.8412C11.5189 27.9813 11.556 27.0863 11.5463 26.2206C11.5384 25.2885 11.5463 24.3604 11.5463 23.1593ZM13.4742 19.6495C15.5508 18.3061 17.4201 17.1401 19.2385 15.8999C20.0089 15.3754 20.6386 15.4144 21.3738 15.9253C22.5196 16.7228 23.7202 17.4345 24.8699 18.2378C25.4193 18.6278 25.8163 18.5557 26.1897 18.0662C26.9836 17.025 27.3629 15.896 26.8291 14.615C26.2953 13.3339 25.3881 12.4077 24.0056 12.359C20.7226 12.2732 17.4318 12.318 14.1449 12.359C13.92 12.359 13.5094 12.749 13.5035 12.9693C13.4547 15.1005 13.4742 17.2336 13.4742 19.6398V19.6495Z" fill="#171923"/>
      </svg>
      <div className={style.input_container}>
        <input type="search" className={style.input} placeholder="Поиск по сайту" />
      </div>
      <button onClick={handleClick}> 
      <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
        <path d="M6.66602 10H33.3327V13.3333H6.66602V10ZM6.66602 18.3333H33.3327V21.6667H6.66602V18.3333ZM6.66602 26.6667H33.3327V30H6.66602V26.6667Z" fill="#2D3748"/>
      </svg>
      </button>
    </nav>
    </>

  )
}

export default Navbar